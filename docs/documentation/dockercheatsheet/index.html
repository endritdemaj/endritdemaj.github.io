<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Docker Cheatsheat | Endrit Demaj</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Docker Cheatsheat | Endrit Demaj"><meta data-react-helmet="true" name="description" content="You can write content using GitHub-flavored Markdown syntax."><meta data-react-helmet="true" property="og:description" content="You can write content using GitHub-flavored Markdown syntax."><meta data-react-helmet="true" property="og:url" content="https://endritdemaj.github.io/endritdemaj.github.io/docs/documentation/dockercheatsheet"><link data-react-helmet="true" rel="shortcut icon" href="/endritdemaj.github.io/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://endritdemaj.github.io/endritdemaj.github.io/docs/documentation/dockercheatsheet"><link rel="stylesheet" href="/endritdemaj.github.io/styles.148959f2.css">
<link rel="preload" href="/endritdemaj.github.io/styles.4d93f332.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/runtime~main.854c1675.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/main.17e190b3.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/1.3ee5d746.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/2.703fa62b.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/33.95084ade.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/34.21b13b37.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/2f6a9c0e.a364b9fa.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/17896441.c596810b.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/50deafe8.4d4718b9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/endritdemaj.github.io/"><img class="navbar__logo" src="/endritdemaj.github.io/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Endrit Demaj</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/endritdemaj.github.io/docs/">Docs</a><a class="navbar__item navbar__link" href="/endritdemaj.github.io/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/endritdemaj.github.io/"><img class="navbar__logo" src="/endritdemaj.github.io/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Endrit Demaj</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/endritdemaj.github.io/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/endritdemaj.github.io/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docusaurus</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/endritdemaj.github.io/docs/">Style Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/endritdemaj.github.io/docs/doc2">Document Number 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/endritdemaj.github.io/docs/doc3">This is Document Number 3</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/endritdemaj.github.io/docs/documentation/linuxcheatsheet">Linux Cheatsheat</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/endritdemaj.github.io/docs/documentation/dockercheatsheet">Docker Cheatsheat</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/endritdemaj.github.io/docs/documentation/tivolicheatsheet">IBM Tivoli Storage Manager</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/endritdemaj.github.io/docs/documentation/systemdcheatsheet">Systemd Cheatsheat</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/endritdemaj.github.io/docs/mdx">Powered by MDX</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Docker Cheatsheat</h1></header><div class="markdown"><p>You can write content using <a href="https://github.github.com/gfm/" target="_blank" rel="noopener noreferrer">GitHub-flavored Markdown syntax</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="docker-editions"></a>Docker Editions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#docker-editions" title="Direct link to heading">#</a></h2><ul><li>Docker is no longer just a &quot;Container runtime&quot;</li><li>Dokcer moves fast, it mattes how you install it</li><li>Docker CE (Community Edtion)</li><li>Three major types of instlals: Direct, Mac/Win, Cloud</li><li>Linux(different per distro) (don&#x27;t use default package)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="general"></a>General<a aria-hidden="true" tabindex="-1" class="hash-link" href="#general" title="Direct link to heading">#</a></h2><p>Image is all the binaries of a container, scripts sources and so on
A Container is a running instance of that image</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="intro"></a>Intro<a aria-hidden="true" tabindex="-1" class="hash-link" href="#intro" title="Direct link to heading">#</a></h2><p>what is happening in &#x27;docker container run&#x27; </p><ol><li>Looks for that image locally in image chache, doesnt find anything</li><li>then looks in remote image repository</li><li>downloads the latest version</li><li>creates new container absed on that images</li><li>gices it a virtual IP on a pricate network inside a container</li><li>opens up port 80 on host and forward to port 80 in contianer</li><li>starts container by using CMD in dockerfile</li></ol><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="cheatsheet"></a>Cheatsheet<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cheatsheet" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="general-1"></a>General<a aria-hidden="true" tabindex="-1" class="hash-link" href="#general-1" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker version                                      #shows the version of docker client(CLI) and docker engine (systemd-deamon)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker info                                         #general info expanded e.g running contianers etc.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker &lt;managemend command&gt; &lt;command&gt;               #docker cointainer run</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docke ps                                            #list all running container. -a list all containers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker top &lt;container id&gt;                           #list processes inside a running container</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ps aux                                              #show processer running inside a docker container too without hiding it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker container inspect                            #details of the container</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker container stats                              #stats of all container</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker update                                       #updating a container without needing to kill it or restart, e.g RAM, Memory, CPU or so. Too much CPU to limit</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="networking"></a>Networking<a aria-hidden="true" tabindex="-1" class="hash-link" href="#networking" title="Direct link to heading">#</a></h2><p><code>&lt;bridge(docker0)&gt;</code> is the default network that routes to the Host Network Interface<br>
<code>&lt;host&gt;</code> it gains performance by skipping virutal networks but sacrifices security of container model. Basically it is direkt on the Host<br>
<code>&lt;none&gt;</code> is not atached to anything</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker network ls                                   #List all docker networks</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker network inspect                              #inspect what we are doing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker network create --driver                      #create a new network</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker network connect                              #atach a network to a container</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker network disconnect                           #detach a network from a container</span></div></div></div></div></div><p>Create a new Network using the default <code>&lt;bridge&gt;</code> driver. If we need another driver, we have to specify it with <code>&lt;--driver&gt;</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker network create my_app_net^C</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#list them</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker network ls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NETWORK ID          NAME                DRIVER              SCOPE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">8d2dc7348d3d        bridge              bridge              local</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">9afc2ba4f278        host                host                local</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd18d7f432a3        my_app_net          bridge              local</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a0c8590e5ace        none                null                local</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker network inspect my_app_net </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Name&quot;: &quot;my_app_net&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Id&quot;: &quot;cd18d7f432a34a979e9f4ae81b5c0be389cd65760fec4168f32c778ff05594ad&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Created&quot;: &quot;2020-08-23T19:59:17.646091944+02:00&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Scope&quot;: &quot;local&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Driver&quot;: &quot;bridge&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;EnableIPv6&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;IPAM&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Driver&quot;: &quot;default&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Options&quot;: {},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Config&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;Subnet&quot;: &quot;172.18.0.0/16&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;Gateway&quot;: &quot;172.18.0.1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Internal&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Attachable&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Ingress&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;ConfigFrom&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Network&quot;: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;ConfigOnly&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Containers&quot;: {},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Options&quot;: {},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Labels&quot;: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div></div></div></div></div><p>To run  a container on a specific network we can do this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker container run -d --name new_nginx --network my_app_net nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">444869e57cfbd60d237d7c6e5ce792dfa78626d41546e6528c6c4b9460b05e53</span></div></div></div></div></div><p>If we inspect our network, we can see this: </p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker network inspect my_app_net </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Name&quot;: &quot;my_app_net&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Id&quot;: &quot;cd18d7f432a34a979e9f4ae81b5c0be389cd65760fec4168f32c778ff05594ad&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Created&quot;: &quot;2020-08-23T19:59:17.646091944+02:00&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Scope&quot;: &quot;local&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Driver&quot;: &quot;bridge&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;EnableIPv6&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;IPAM&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Driver&quot;: &quot;default&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Options&quot;: {},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Config&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;Subnet&quot;: &quot;172.18.0.0/16&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;Gateway&quot;: &quot;172.18.0.1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Internal&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Attachable&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Ingress&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;ConfigFrom&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Network&quot;: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;ConfigOnly&quot;: false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Containers&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;444869e57cfbd60d237d7c6e5ce792dfa78626d41546e6528c6c4b9460b05e53&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;Name&quot;: &quot;new_nginx&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;EndpointID&quot;: &quot;e33e1489899ddfcfe36cbf06406561e3d2a17ad4a03a966d68ef9bd52192e47f&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:02&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;IPv4Address&quot;: &quot;172.18.0.2/16&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;IPv6Address&quot;: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        },__</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Options&quot;: {},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Labels&quot;: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div></div></div></div></div><p>If we want to connect an existing container to a network we have to run the following  </p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker network connect &lt;containerid&gt; &lt;networkid&gt;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="docker-networks-dns"></a>Docker Networks: DNS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#docker-networks-dns" title="Direct link to heading">#</a></h3><p>In the world where containers changes from second  to second we cant rely on IPAddresses. Since its to dynamic
There is a build in solution for this and that is <strong>DNS-Naming</strong></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="tldl"></a>TL;DL<a aria-hidden="true" tabindex="-1" class="hash-link" href="#tldl" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker container run -d --name my_container_name                                                    #run a container with a dns-name my_container_name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --network-alias search --rm --name elastic_3 --network my_app_network elasticsearch:2 #run container in network my_app_network with the network alias &#x27;search&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker container run -d --name my_container_name </span></div></div></div></div></div><p>Since we cant have a container with a same name, docker brings up DNS-resolving with it. With the Option <code>--net-alias</code> or <code>--network-alias</code><br>
The following commands will fire up two elasticsearch containers with the network-name <code>search</code> and different container names on the docker network <code>my_app_network</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --network-alias search --rm --name elastic_3 --network my_app_network elasticsearch:2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --network-alias search --rm --name elastic_4 --network my_app_network elasticsearch:2</span></div></div></div></div></div><p>If we have a look and curl now the default elasticsearch port <code>9200</code> we can check that the DNS-Round-Robin works</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker container run --rm -ti --network my_app_network centos curl -s search:9200</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;name&quot; : &quot;Turner D. Century&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;cluster_uuid&quot; : &quot;BsfpId_oSC6JBdP7EvdJiQ&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;version&quot; : {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;number&quot; : &quot;2.4.6&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;build_hash&quot; : &quot;5376dca9f70f3abef96a77f4bb22720ace8240fd&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;build_timestamp&quot; : &quot;2017-07-18T12:17:44Z&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;build_snapshot&quot; : false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;lucene_version&quot; : &quot;5.5.4&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker container run --rm -ti --network my_app_network centos curl -s search:9200</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;name&quot; : &quot;Tyga&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;cluster_uuid&quot; : &quot;PN5LN99vSySvyuNX1csktg&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;version&quot; : {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;number&quot; : &quot;2.4.6&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;build_hash&quot; : &quot;5376dca9f70f3abef96a77f4bb22720ace8240fd&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;build_timestamp&quot; : &quot;2017-07-18T12:17:44Z&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;build_snapshot&quot; : false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;lucene_version&quot; : &quot;5.5.4&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="docker-images"></a>Docker Images<a aria-hidden="true" tabindex="-1" class="hash-link" href="#docker-images" title="Direct link to heading">#</a></h2><ul><li>App binaries and dependencies </li><li>Metadata about the image</li><li>Not a complete OS. No kernel, kernel modules (e.g. drivers)</li><li>App as apache</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="tltd"></a>TL;TD;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#tltd" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker pull nginx                           #Pull latest nginx image from default repository</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker history nginx:latest                 #check history of the latest nginx image</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker pull nginx:1.11.9                    #pull specific image of nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image inspect nginx                  #inspect the nginx image and check its metadata</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image tag nginx endritdemaj/nginx    #give the nginx a new TAG</span></div></div></div></div></div><p>pull latest image of <code>nginx</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker pull nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Using default tag: latest</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">latest: Pulling from library/nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">bf5952930446: Already exists </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cb9a6de05e5a: Pull complete </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">9513ea0afb93: Pull complete </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">b49ea07d2e93: Pull complete </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a5e4a503d449: Pull complete </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Digest: sha256:b0ad43f7ee5edbc0effbc14645ae7055e21bc1973aee5150745632a24a752661</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Status: Downloaded newer image for nginx:latest</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker.io/library/nginx:latest</span></div></div></div></div></div><p>pull another version of <code>nginx:tag</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker pull nginx:1.11.9</span></div></div></div></div></div><p>Check the layers of a container with <code>docker image history</code> or <code>docker history</code>
Every image starts with a <code>scratch</code> (first layer) and every change on that image is another layer</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker history nginx:latest</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">4bb46517cac3        10 days ago         /bin/sh -c #(nop)  CMD [&quot;nginx&quot; &quot;-g&quot; &quot;daemonâ€¦   0B                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c #(nop)  STOPSIGNAL SIGTERM           0B                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c #(nop)  EXPOSE 80                    0B                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c #(nop)  ENTRYPOINT [&quot;/docker-entrâ€¦   0B                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c #(nop) COPY file:0fd5fca330dcd6a7â€¦   1.04kB              </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c #(nop) COPY file:1d0a4127e78a26c1â€¦   1.96kB              </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c #(nop) COPY file:e7e183879c35719câ€¦   1.2kB               </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c set -x     &amp;&amp; addgroup --system -â€¦   63.4MB              </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c #(nop)  ENV PKG_RELEASE=1~buster     0B                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c #(nop)  ENV NJS_VERSION=0.4.3        0B                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           10 days ago         /bin/sh -c #(nop)  ENV NGINX_VERSION=1.19.2     0B                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           2 weeks ago         /bin/sh -c #(nop)  LABEL maintainer=NGINX Doâ€¦   0B                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           2 weeks ago         /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;missing&gt;           2 weeks ago         /bin/sh -c #(nop) ADD file:3af3091e7d2bb40bcâ€¦   69.2MB  </span></div></div></div></div></div><p>Check an image and see its metadata with the following command to see e.g. which ports we have to open up on our host for the created container.
Check env. variables, or nginx version, author and so on.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image inspect nginx</span></div></div></div></div></div><p>To give an image a new tag we hit. If we don&#x27;t specify  a TAG it defaults to latest. Latest is a default TAG and not the latest image</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image tag nginx endritdemaj/nginx</span></div></div></div></div></div><p>With the following command we push the new image to the default registry (docker hub)</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image push endritdemaj/nginx</span></div></div></div></div></div><p>See example here: </p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker image tag nginx endritdemaj/nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker image ls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">REPOSITORY                                  TAG                 IMAGE ID            CREATED             SIZE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endritdemaj/nginx                           latest              4bb46517cac3        10 days ago         133MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">nginx                                       latest              4bb46517cac3        10 days ago         133MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker image push endritdemaj/nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The push refers to repository [docker.io/endritdemaj/nginx]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">550333325e31: Preparing </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">22ea89b1a816: Preparing </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a4d893caa5c9: Preparing </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0338db614b95: Preparing </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">d0f104dc0a1f: Preparing </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">denied: requested access to the resource is denied</span></div></div></div></div></div><p>I can create new Tags as we want</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker image tag endritdemaj/nginx:latest endritdemaj/nginx:testing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker image ls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">REPOSITORY                                  TAG                 IMAGE ID            CREATED             SIZE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">nginx                                       latest              4bb46517cac3        10 days ago         133MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endritdemaj/nginx                           latest              4bb46517cac3        10 days ago         133MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endritdemaj/nginx                           testing             4bb46517cac3        10 days ago         133MB</span></div></div></div></div></div><p>If you want to create an Image of a running container you do the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker commit &lt;containerid&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#Find in docker image ls the new image</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image tag &lt;imageid&gt; repo:tag</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image push repo:tag                      #to push the image to the repo</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="dockerfile"></a>Dockerfile<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dockerfile" title="Direct link to heading">#</a></h3><p>The instructions on how to build an Image are stored in a Dockerfile  </p><p>Package Manager like apt and yum are one of the reasons to build container <code>FROM Debian, Ubuntu, Fedora or CentOS</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build -f some-dockerfile                         #to build from a specific dockerfile instead of the default</span></div></div></div></div></div><p>When we build an Image, it pulls the debian:jessie image to the local Docker Host from docker hub. Then each line is going to be executed and cached layer by layer on the docker engine
Each Command in a Dockerfile is a new Image Layer</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FROM debian:jessie                                      #use always a minimum distribution</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ENV NGINX_VERSION 1.11.10-1~jessie                      #Enironment variables which are very important for containers since all the info is there</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN apt-key...                                          #runs command e.g unzipping, install something or so on.</span></div></div></div></div></div><p>It is usual that commands get brought together with <code>&amp;&amp;</code> because each command is a new layer to sace space and time</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN apt-get update \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &amp;&amp; apt-get install --no-install-recommends -y \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ca-certificates</span></div></div></div></div></div><p>Loggin in Docker is managed by Docker itself we have to move the logging to stdout. Everything that we want to log has to be moved there</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN ln -sf /dev/stdout /var/log/nginx/access.log \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log</span></div></div></div></div></div><p>Exporse a port on the docker virual network. The ports are not automatically exposed on the host. Thats why we need the <code>--p</code> in <code>docker run</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">EXPOSE 80 443</span></div></div></div></div></div><p>This command is launched every time we start a new container or when we restart a container</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;deamon off;&quot;]</span></div></div></div></div></div><p>The following command builds all dockerfiles in the current directory where <code>customnginx</code> is the image name</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image build -t customnginx .</span></div></div></div></div></div><p>The hash at the line cached the changes to that line so if nothing changes til that line docker doesnt rebuild it. It is very import that the things that
change the least are on the top of the file and at the button the stuff that changes most</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker image build -t customnginx .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Sending build context to Docker daemon   16.9kB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 1/7 : FROM debian:stretch-slim</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stretch-slim: Pulling from library/debian</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">75cb2ebf3b3c: Pull complete </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Digest: sha256:c4052b51588fc32fe0c25a984a34cad5dc5990b9c12744073a9c409a6d0737cf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Status: Downloaded newer image for debian:stretch-slim</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; 8ff748cdd6b1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 2/7 : ENV NGINX_VERSION 1.13.6-1~stretch</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; Running in 30c99b093c02</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Removing intermediate container 30c99b093c02</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; 03ecbd5ec3cc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 3/7 : ENV NJS_VERSION   1.13.6.0.1.14-1~stretch</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; Running in df3282dfa152</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Removing intermediate container df3282dfa152</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; b4b4df428136</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 4/7 : RUN apt-get update   &amp;&amp; apt-get install --no-install-recommends --no-install-suggests -y gnupg1  &amp;&amp;  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; 713bcce48334</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 6/7 : EXPOSE 80 443</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; 7270661a16d0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 7/7 : CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; ef446a55347e</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully built ef446a55347e</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully tagged customnginx:latest</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$docker image ls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">REPOSITORY                                  TAG                 IMAGE ID            CREATED             SIZE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">customnginx                                 latest              ef446a55347e        2 minutes ago       108MB</span></div></div></div></div></div><p>Use <code>WORKDIR</code> to change directory. This is best pratice. See example below where we copy <code>index.html</code> to the docker image</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ll</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">total 16</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x  2 endrit root 4096 Aug 22 21:24 ./</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x 32 endrit root 4096 Aug 22 21:24 ../</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  1 endrit root  410 Aug 22 21:24 Dockerfile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  1 endrit root  249 Aug 22 21:24 index.html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$cat Dockerfile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">FROM nginx:latest</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">WORKDIR /usr/share/nginx/html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">COPY index.html index.html</span></div></div></div></div></div><p>we can use <code>prune</code> to clean up images, volumes, build cache and containers</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image prune                  #to clean up just dangling images</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker system prune                 #will clean up everything</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker image prune -a               #will remove all images that are not used</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker system df                    #to see space usage</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="container-lifetime--persistent-data"></a>Container Lifetime &amp; Persistent Data<a aria-hidden="true" tabindex="-1" class="hash-link" href="#container-lifetime--persistent-data" title="Direct link to heading">#</a></h2><p>Volume in Dockerfile</p><p>Any file that is put in the Volume will outlive the contianer until we delete the volume. They needs to be manually deleted.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">VOLUME /var/lib/mysql                           #Creates a new named Volume on the host in &#x27;dockerdir&#x27;/somehash/&#x27;_data and on the container under /var/lib/mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker inspect &lt;container&gt;                      #under Volumes we can see the Volumes and under Mounts we can see the mapping from the Host(Source) to the Container(Destination)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker container run -d mysql -v friendlyname:/var/lib/sql          #Creates a volume with a friendly name on the Host and on the Container</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker volumes ls                               #check mounted volumes and with inspect to check the mounts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker volume create                            #create a new Docker Volume ahead of the Time</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="bind-mounting"></a>Bind Mounting<a aria-hidden="true" tabindex="-1" class="hash-link" href="#bind-mounting" title="Direct link to heading">#</a></h3><p>Maps a host file or directory to a container file or directory. Two locations pointing to the same files.
Has to be done in container run, cant be done in Dockerfile</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">... run -v /home/endrit/stuff:/path/container</span></div></div></div></div></div><p>For Example i start here a Postgres db</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --name pgdb962 -v pgdata:/var/lib/postgresql/data -e POSTGRES_PASSWORD=yourPW -d postgres:9.6.2</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="docker-compose"></a>Docker Compose<a aria-hidden="true" tabindex="-1" class="hash-link" href="#docker-compose" title="Direct link to heading">#</a></h2><p>Configure relationships between containers
save our docker container run settings in easy-to-read file
create one-liner developer environment startups</p><ol><li>YAML-Formatted file that describes our solution options for :<ul><li>container</li><li>networks</li><li>volumes</li></ul></li><li>A CLI tool <code>docker-compose</code> used for local dev/test automation with those YAML files</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="docker-composeyml"></a>docker-compose.yml<a aria-hidden="true" tabindex="-1" class="hash-link" href="#docker-composeyml" title="Direct link to heading">#</a></h3><p>Here is an example of a <code>docker-compose.yml</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">version: &#x27;2&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># same as</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># docker run -p 80:80 -v $(pwd):/tmp nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">services:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    nginx:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        image:nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        volumes:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            -.:tmp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ports:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            - &#x27;80:80&#x27;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="docker-compose-cli"></a>docker-compose CLI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#docker-compose-cli" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up               # setup volumes/networks and start all containers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose down             # stop all containers and remove cont/vol/net</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose ps               #shows running containers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose logs             #show logs of the containers </span></div></div></div></div></div><p>if all your project had a Dockerfile and docker-compose.yml then a &quot;new developer onboardning&quot; would be:
git clone github.com/some/software
docker-compose up</p><p>First docker-compose.yml
If we change the name than we have to give it with a parameter to the file
This code starts up a <code>drupal</code> container with a <code>postgres</code> database. Remember that the default host for postgress is <code>localhos</code> but outside of the container its the service name</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">version: &#x27;2&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">services:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  drupal:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    image: drupal</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - &quot;8080:80&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - drupal-profiles:/var/www/html/profiles</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - drupal-sites:/var/www/html/sites </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - drupal-themes:/var/www/html/themes </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    environment:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        POSTGRES_PASSWORD: example</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    links:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - postgres2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  postgres2:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    image: postgres</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    environment:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        POSTGRES_DB: drupal</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        POSTGRES_USER: user</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        POSTGRES_PASSWORD: example</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">volumes:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    drupal-profiles:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    drupal-sites:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    drupal-themes:</span></div></div></div></div></div><p>Docker compose build. If we have this option in the Yaml it will build the image the first time it runs. If we want to force build the image, we hate to run
Great for complex build that have lots of vars or build args</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up --build</span></div></div></div></div></div><p>In the below example we build a custom image if the image nginx-custom is not in the cache.
If the service need a database we would just hang that in</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#docker-compose.yml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    services:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            build:                                      #Tells that the image needs to be build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                context: .                              #Build the Image in the current dir</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                dockerfile: nginx.Dockerfile            #Build the image using this Dockerfile</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            image: nginx-custom                         #name the image after the build nginx-custom</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ports:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                - &#x27;80:80&#x27;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="docker-swarm"></a>Docker Swarm<a aria-hidden="true" tabindex="-1" class="hash-link" href="#docker-swarm" title="Direct link to heading">#</a></h2><p>How do we automate container lifecycle?
How can we easily scale out/in/up/down?
How can we ensure our containers are re-created if they fail?
How can we replace containers without downtine (blue/green deploy)</p><p>Swarm Mode is a clustering solution built inside Docker</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker swarm init                       #to initialize swarm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">To add a worker to this swarm, run the following command:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker swarm join --token SWMTKN-1####################################################################3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">To add a manager to this swarm, run &#x27;docker swarm join-token manager&#x27; and follow the instructions.</span></div></div></div></div></div><p>Service in a Swarm replaces <code>docker run</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker service &lt;CMD&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker service create alpine ping 8.8.8.8               # create a new service that runs alpine container that does a ping to google </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker service ls                                       # list all the services</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker service ps &lt;ServiceName or ID&gt;                   # list all the contianers inside a service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker service update &lt;ID&gt; --replicas 3                 # Now we want to scale our service up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker node update --role manager &lt;ipofnode&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker service create --replicas 3 alpine ping 8.8.8.8</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker service ps fervent_mendel </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ID                  NAME                IMAGE               NODE                DESIRED STATE       CURRENT STATE            ERROR               PORTS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">xkafd3dyla7z        fervent_mendel.1    alpine:latest       node1               Running             Running 37 seconds ago                       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">p89fx51fejae        fervent_mendel.2    alpine:latest       node2               Running             Running 37 seconds ago                       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gyx2xbuobitz        fervent_mendel.3    alpine:latest       node3               Running             Running 37 seconds ago     </span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="docker-machine"></a>Docker Machine<a aria-hidden="true" tabindex="-1" class="hash-link" href="#docker-machine" title="Direct link to heading">#</a></h2><p>CLI tool to create new nodes using virtualboc</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-machine create node1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-machine create node2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-machine create node3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#access </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-machine ssh &lt;name&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker-machine env node1</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/documentation/dockercheatsheet.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/endritdemaj.github.io/docs/documentation/linuxcheatsheet"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Linux Cheatsheat</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/endritdemaj.github.io/docs/documentation/tivolicheatsheet"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">IBM Tivoli Storage Manager (TSM) Cheatsheat Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#docker-editions" class="table-of-contents__link">Docker Editions</a></li><li><a href="#general" class="table-of-contents__link">General</a></li><li><a href="#intro" class="table-of-contents__link">Intro</a></li><li><a href="#general-1" class="table-of-contents__link">General</a></li><li><a href="#networking" class="table-of-contents__link">Networking</a><ul><li><a href="#docker-networks-dns" class="table-of-contents__link">Docker Networks: DNS</a></li></ul></li><li><a href="#docker-images" class="table-of-contents__link">Docker Images</a><ul><li><a href="#dockerfile" class="table-of-contents__link">Dockerfile</a></li></ul></li><li><a href="#container-lifetime--persistent-data" class="table-of-contents__link">Container Lifetime &amp; Persistent Data</a><ul><li><a href="#bind-mounting" class="table-of-contents__link">Bind Mounting</a></li></ul></li><li><a href="#docker-compose" class="table-of-contents__link">Docker Compose</a><ul><li><a href="#docker-composeyml" class="table-of-contents__link">docker-compose.yml</a></li></ul></li><li><a href="#docker-compose-cli" class="table-of-contents__link">docker-compose CLI</a></li><li><a href="#docker-swarm" class="table-of-contents__link">Docker Swarm</a></li><li><a href="#docker-machine" class="table-of-contents__link">Docker Machine</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/endritdemaj.github.io/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/endritdemaj.github.io/docs/doc2/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/endritdemaj.github.io/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/endritdemaj.github.io/styles.4d93f332.js"></script>
<script src="/endritdemaj.github.io/runtime~main.854c1675.js"></script>
<script src="/endritdemaj.github.io/main.17e190b3.js"></script>
<script src="/endritdemaj.github.io/1.3ee5d746.js"></script>
<script src="/endritdemaj.github.io/2.703fa62b.js"></script>
<script src="/endritdemaj.github.io/33.95084ade.js"></script>
<script src="/endritdemaj.github.io/34.21b13b37.js"></script>
<script src="/endritdemaj.github.io/2f6a9c0e.a364b9fa.js"></script>
<script src="/endritdemaj.github.io/17896441.c596810b.js"></script>
<script src="/endritdemaj.github.io/50deafe8.4d4718b9.js"></script>
</body>
</html>