<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Kubernetes Cheatsheet | Endrit Demaj</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Kubernetes Cheatsheet | Endrit Demaj"><meta data-react-helmet="true" name="description" content="Kubernetes"><meta data-react-helmet="true" property="og:description" content="Kubernetes"><meta data-react-helmet="true" property="og:url" content="https://endritdemaj.github.io/endritdemaj.github.io/docs/documentation/kubernetescheatsheet"><link data-react-helmet="true" rel="shortcut icon" href="/endritdemaj.github.io/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://endritdemaj.github.io/endritdemaj.github.io/docs/documentation/kubernetescheatsheet"><link rel="stylesheet" href="/endritdemaj.github.io/styles.7e5b3484.css">
<link rel="preload" href="/endritdemaj.github.io/styles.f72c4836.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/runtime~main.f6deb699.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/main.a24e04ce.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/1.5019c694.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/2.4810d027.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/3.b0ed3238.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/1be78505.ab0d6248.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/35.9ce054ee.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/2f6a9c0e.d0d7884b.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/17896441.88772c2a.js" as="script">
<link rel="preload" href="/endritdemaj.github.io/7463086d.3d4f44ca.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/endritdemaj.github.io/"><img class="navbar__logo" src="/endritdemaj.github.io/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Endrit Demaj</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/endritdemaj.github.io/docs/">Docs</a><a class="navbar__item navbar__link" href="/endritdemaj.github.io/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/endritdemaj.github.io/"><img class="navbar__logo" src="/endritdemaj.github.io/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Endrit Demaj</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/endritdemaj.github.io/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/endritdemaj.github.io/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docusaurus</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/endritdemaj.github.io/docs/">Style Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/endritdemaj.github.io/docs/doc2">Document Number 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/endritdemaj.github.io/docs/doc3">This is Document Number 3</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/endritdemaj.github.io/docs/documentation/linuxcheatsheet">Linux Cheatsheat</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/endritdemaj.github.io/docs/documentation/dockercheatsheet">Docker Cheatsheat</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/endritdemaj.github.io/docs/documentation/kubernetescheatsheet">Kubernetes Cheatsheat</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/endritdemaj.github.io/docs/documentation/tivolicheatsheet">IBM Tivoli Storage Manager</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/endritdemaj.github.io/docs/documentation/systemdcheatsheet">Systemd Cheatsheat</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/endritdemaj.github.io/docs/mdx">Powered by MDX</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Kubernetes Cheatsheet</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="kubernetes"></a>Kubernetes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#kubernetes" title="Direct link to heading">#</a></h1><p>Kubernetes: The whole orchestration system
K8s or Kube for short
kubectl: CLI to configure Kubernetes and manage apps
Node: Single server in the Kubernetes cluster
Kubelet: Kubernetes agent running on nodes kubelet.service
Control Plane: Set of containers that manage the cluster</p><p>Master and Workers</p><p>Master<br>
Runs the following container</p><ul><li>etcd - distibuted store system key value to store configuration data</li><li>API  -  the way we talk to the cluster</li><li>Scheduler - to controle the containers and pods</li><li>Controller Manager - </li><li>CoreDNS</li></ul><p>Nodes  </p><ul><li>kubelet Agent</li><li>Kube-proxy - to controll the networking</li></ul><p>Pod: one or more containers running together on one Node<br>
Basic unit of deployment. containers are always in pods<br>
Controller: For creating/updating pods and other objects<br>
Many types of Controllers inc. Deployment, ReplicaSet, statefulSet
Service: network endpoint to connect to a pod
Namespace: Filtered group of objects in cluster</p><p><code>kubectl version</code> to check version for client and server</p><p>Two ways to deploy Pods (containers) : Via commands or via YAML</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># to start a pod</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run my-nginx --image nginx                      # create a single pod   # before 1.18 this would create a deployment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create deployment nginx --image nginx           # create a deployment with a replicaset in it which got pods running</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># to see what we did there</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all                             #see all objects</span></div></div></div></div></div><p>Pods -&gt; ReplicaSet -&gt; Deployment</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete deployment my-nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete pod my-nginx                     # to delete the pod i created</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="scaling-replicasets"></a>Scaling ReplicaSets<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scaling-replicasets" title="Direct link to heading">#</a></h2><p>Start a new deployment for Apache/pod</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#OLD kubectl run my-apache --image httpd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create deployment my-apache --image httpd</span></div></div></div></div></div><p>Scale up to to replicas</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl scale deployment.apps/my-apache --replicas 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#or</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl scale deploy my-apache --replicas 3</span></div></div></div></div></div><p>This is how it looks after the last commands with the Pods/Replicas/deployments</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$kubectl get all</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                             READY   STATUS    RESTARTS   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/my-apache-65fd7bd7db-gn7qg   1/1     Running   0          2m23s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/my-apache-65fd7bd7db-nt98m   1/1     Running   0          3m41s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/my-apache-65fd7bd7db-snfp4   1/1     Running   0          54s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   21m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment.apps/my-apache   3/3     3            3           3m41s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                   DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">replicaset.apps/my-apache-65fd7bd7db   3         3         3       3m41s</span></div></div></div></div></div><p>Check pods</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods                                    #get running pods</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -w                                              #to watch</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl logs deployment/my-apache                   # get the log of the deployment where only the log of one pod is showing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --follow, --tail 10                         # like linux, follow the logs or show only tail 10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl logs deployment/my-apache                       # see all logs for label -x`l </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --all-containers=true                       # to see logs for all containers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl describe pod/my-apache-65fd7bd7db-gn7qg     # describe pod and see events</span></div></div></div></div></div><ul><li>Learning Services Types</li><li>Creating Services Types</li><li>Exposing Containers</li></ul><p>A service is a stable address for pods. If we want to connect to pods, we need a service
CoreDNS allows us to sesorlve services by name.
kubectl expose                  #creates a service for existing pods</p><ul><li>ClusterIP (default) <ul><li>Single, internal virtual IP allocated</li><li>only reachable from within cluster (nodes and pods)</li><li>pods can reach service on apps port number</li></ul></li><li>NodePort<ul><li>Designed for something outside the cluster</li><li>High port allocated on each node</li><li>Port is open on every nodes IP</li></ul></li><li>LoadBalancer<ul><li>Controls a LB endpoint external to the cluster</li><li>Only available when infra provider gives you a LB</li><li>creates NodePort+ClusterIP services, tells LB to send to NodePort</li></ul></li><li>ExternalName<ul><li>Stuff in our cluster need to talk outside the cluster</li><li>adds CNAME DNS record to CoreDNS only</li><li>Not used for Pods, but for giving pods a DNS name to use for something outside K8s</li></ul></li></ul><p>Expose Deployment to port</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl expose deployment/httpenv --port 8888           #exposing httpsenv to port 8888</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get service                                     # to list all running services</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#start a container temporary start with bash remove it after it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run --generator run-pod/v1 tmp-shell --rm -it --image bretfisher/netshoot -- bash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#Expose httpenv to the NodePort so the Service is reachable outside of the Cluster</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl expose deployment/httpenv --port 8888 --name httpsenv-np --type NodePort # now we can curl localhost</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl expose deployment/httpenv --port 8888 --name httpsenv-lb --type LoadBalancer</span></div></div></div></div></div><p>Kubernetes Services DNS</p><ul><li>Starting with 1.11, internal DNS is provided by CoreDNS</li><li>Like Swarm, this is DNS-Based Service Discovery</li><li>So Far we&#x27;ve been using hostnames to access Services
<code>&gt; curl &lt;hostname&gt;</code></li><li>Namespaces to section up inside clusters <code>kubectl get namespaces</code>
Services also have a FQDN
<code>&gt; curl &lt;hostname&gt;.&lt;namespace&gt;.svc.cluster.local</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="run-create-and-expose-generators"></a>Run, Create and Expose Generators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#run-create-and-expose-generators" title="Direct link to heading">#</a></h2><p>These commands use helper templates called &quot;generators&quot;
Every resource in Kubernetes has a specification or &quot;spec&quot;
Try it out with<br>
<code>&gt; kubectl create deployment sample --image nginx --dry-run -o yaml</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="imperative-vs-declarative"></a>Imperative vs. Declarative<a aria-hidden="true" tabindex="-1" class="hash-link" href="#imperative-vs-declarative" title="Direct link to heading">#</a></h2><p>Learn the Imperative CLI for easy control of local and test setups
Move to apply -f file.yml and apply -f directory\
Store yaml in git, git commit each change before you apply</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="kubectl-apply"></a>kubectl apply<a aria-hidden="true" tabindex="-1" class="hash-link" href="#kubectl-apply" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#create/update resources in a file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f filename.yml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#create/update a whole driectory of yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f myyaml/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#create/update from  a URL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://bret.run/pod.yml</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="kubernetes-configuration-yaml"></a>Kubernetes Configuration YAML<a aria-hidden="true" tabindex="-1" class="hash-link" href="#kubernetes-configuration-yaml" title="Direct link to heading">#</a></h2><ul><li>Kubernetes configuration file (YAML or JSON)</li><li>Each file contains one or more manifests</li><li>Each manifest describes an API object (deployment, job, secret)</li><li>Each manifest needs four parts(root key:values in the file)</li><li>apiVersion:</li><li>kind:</li><li>metadata:</li><li>spec:</li></ul><p>Example of a yml-file</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$cat app.yml </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: app-nginx-service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type: NodePort</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ports:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - port: 80</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  selector:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    app: app-nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: apps/v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Deployment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: app-nginx-deployment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  replicas: 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  selector:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    matchLabels:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      app: app-nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  template:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      labels:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        app: app-nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      containers:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        image: nginx:1.17.3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ports:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        - containerPort: 80</span></div></div></div></div></div><p>Building Your YAML spec<br>
We can get  all the keys each kind supports<br>
<code>kubectl explain services --recursive</code><br>
List only the specs<br>
<code>kubectl explain services.spec</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="hands-on"></a>Hands on<a aria-hidden="true" tabindex="-1" class="hash-link" href="#hands-on" title="Direct link to heading">#</a></h2><p>Start the Services from ./app.yml
<code>kubectl apply -f app.yml</code>
check if there are any changes and update the services<br>
<code>kubectl apply -f app.yml --server-dry-run</code>
Compare the yaml with the stuff running in the Server
<code>kubectl diff -f app.yml </code>  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="labels-and-annotations"></a>Labels and Annotations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#labels-and-annotations" title="Direct link to heading">#</a></h2><p>Lables goes under <code>metadata:</code> in your YAML<br>
Simple list of key:value for identifying your resource lateyer by selecting , grouping, or filtering for it<br>
Comon examples include <code>tier: frontend, app:api, env:prod, customer:acme.co</code></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/documentation/kubernetescheatsheet.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/endritdemaj.github.io/docs/documentation/dockercheatsheet"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Docker Cheatsheat</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/endritdemaj.github.io/docs/documentation/tivolicheatsheet"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">IBM Tivoli Storage Manager (TSM) Cheatsheat Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#scaling-replicasets" class="table-of-contents__link">Scaling ReplicaSets</a></li><li><a href="#run-create-and-expose-generators" class="table-of-contents__link">Run, Create and Expose Generators</a></li><li><a href="#imperative-vs-declarative" class="table-of-contents__link">Imperative vs. Declarative</a></li><li><a href="#kubectl-apply" class="table-of-contents__link">kubectl apply</a></li><li><a href="#kubernetes-configuration-yaml" class="table-of-contents__link">Kubernetes Configuration YAML</a></li><li><a href="#hands-on" class="table-of-contents__link">Hands on</a></li><li><a href="#labels-and-annotations" class="table-of-contents__link">Labels and Annotations</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/endritdemaj.github.io/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/endritdemaj.github.io/docs/doc2/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/endritdemaj.github.io/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/endritdemaj.github.io/styles.f72c4836.js"></script>
<script src="/endritdemaj.github.io/runtime~main.f6deb699.js"></script>
<script src="/endritdemaj.github.io/main.a24e04ce.js"></script>
<script src="/endritdemaj.github.io/1.5019c694.js"></script>
<script src="/endritdemaj.github.io/2.4810d027.js"></script>
<script src="/endritdemaj.github.io/3.b0ed3238.js"></script>
<script src="/endritdemaj.github.io/1be78505.ab0d6248.js"></script>
<script src="/endritdemaj.github.io/35.9ce054ee.js"></script>
<script src="/endritdemaj.github.io/2f6a9c0e.d0d7884b.js"></script>
<script src="/endritdemaj.github.io/17896441.88772c2a.js"></script>
<script src="/endritdemaj.github.io/7463086d.3d4f44ca.js"></script>
</body>
</html>